---
id: migrate-8_3_x-to-8_4_x
title: 8.3.x 至 8.4.x
sidebar_position: 9
description: 如何將 Grafana v8.3.x 插件遷移至 Grafana v8.4.x。
keywords:
  - grafana
  - plugins
  - plugin
  - upgrading
  - updating
  - migration
---

# 將插件從 Grafana 8.3.x 版遷移至 8.4.x 版

請遵循以下說明，將 Grafana v8.3.x 插件遷移至 Grafana v8.4.x。根據您的插件，您需要執行以下一個或多個步驟。

## Value Mapping Editor 已從 @grafana-ui 函式庫中移除

已移除，因為它是一個內部元件。

## Thresholds Editor 已從 @grafana-ui 函式庫中移除

已移除，因為它是一個內部元件。

## 8.4 棄用

以下功能已在 8.4 版中棄用。

### `LocationService` 取代 `getLocationSrv`

在先前的版本中，我們遷移至使用新的路由系統，並引入了一個用於管理位置、導覽和相關資訊的新服務。在此版本中，我們將該新服務設為主要服務。

**範例：**

匯入服務：

```ts
// 之前
import { getLocationSrv } from '@grafana/runtime';

// 之後
import { locationService } from '@grafana/runtime';
```

**範例：**

導覽至一個路徑並在導覽歷史記錄中新增一筆新記錄，以便您可以返回前一筆記錄：

```ts
// 之前
getLocationSrv.update({
  path: '/route-to-navigate-to',
  replace: false,
});

// 之後
locationService.push('/route-to-navigate-to');
```

**範例：**

導覽至一個路徑並取代導覽歷史記錄中的目前記錄：

```ts
// 之前
getLocationSrv.update({
  path: '/route-to-navigate-to',
  replace: true,
});

// 之後
locationService.replace('/route-to-navigate-to');
```

**範例：**

更新目前路由的搜尋或查詢參數，並在導覽歷史記錄中新增一筆新記錄，以便您可以返回前一筆記錄：

```ts
// 如何導覽至新路徑
// 之前
getLocationSrv.update({
  query: {
    value: 1,
  },
  partial: true,
  replace: false,
});

// 之後
locationService.partial({ value: 1 });
```

**範例：** 更新目前路由的搜尋或查詢參數，並在導覽歷史記錄中取代它：

```ts
// 之前
getLocationSrv.update({
  query: {
    'var-variable': 1,
  },
  partial: true,
  replace: true,
});

// 之後
locationService.partial({ 'var-variable': 1 }, true);
```